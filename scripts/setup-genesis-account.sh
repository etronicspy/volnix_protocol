#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ genesis –∞–∫–∫–∞—É–Ω—Ç–∞ —Å –±–∞–ª–∞–Ω—Å–æ–º
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./scripts/setup-genesis-account.sh

set -e

echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ genesis –∞–∫–∫–∞—É–Ω—Ç–∞ —Å –±–∞–ª–∞–Ω—Å–æ–º..."
echo ""

# –¢–µ—Å—Ç–æ–≤–∞—è –º–Ω–µ–º–æ–Ω–∏–∫–∞ –¥–ª—è genesis –∞–∫–∫–∞—É–Ω—Ç–∞
GENESIS_MNEMONIC="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"

echo "üìù –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–Ω–µ–º–æ–Ω–∏–∫–∞:"
echo "   $GENESIS_MNEMONIC"
echo ""

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–¥—Ä–µ—Å –∏–∑ –º–Ω–µ–º–æ–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—è Python —Å–∫—Ä–∏–ø—Ç
echo "üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ –∏–∑ –º–Ω–µ–º–æ–Ω–∏–∫–∏..."

# –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–∞
python3 << 'PYTHON_SCRIPT'
import hashlib
import base64

# –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ (–¥–ª—è –¥–µ–º–æ)
# –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º BIP32/BIP44
mnemonic = "abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º seed –∏–∑ –º–Ω–µ–º–æ–Ω–∏–∫–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ)
seed = hashlib.sha256(mnemonic.encode()).digest()

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–¥—Ä–µ—Å (—É–ø—Ä–æ—â–µ–Ω–Ω–æ, –¥–ª—è –¥–µ–º–æ)
# –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º Bech32
address_hash = hashlib.sha256(seed).hexdigest()[:40]
address = f"volnix1{address_hash}"

print(f"üìç –ê–¥—Ä–µ—Å genesis –∞–∫–∫–∞—É–Ω—Ç–∞: {address}")
print("")
print("‚ö†Ô∏è  –í–ê–ñ–ù–û: –≠—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞!")
print("üí° –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CosmJS –∏–ª–∏ CLI")
print("")
print("üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:")
print("   1. –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏–∑ –º–Ω–µ–º–æ–Ω–∏–∫–∏ —á–µ—Ä–µ–∑ CosmJS")
print("   2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ Query –º–µ—Ç–æ–¥ –≤ cmd/volnixd-standalone/main.go")
print("   3. –î–æ–±–∞–≤—å—Ç–µ –±–∞–ª–∞–Ω—Å—ã –¥–ª—è —ç—Ç–æ–≥–æ –∞–¥—Ä–µ—Å–∞")
print("   4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —É–∑–µ–ª")
PYTHON_SCRIPT

echo ""
echo "‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞!"
echo ""
echo "üí° –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞:"
echo "   1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ—à–µ–ª—å–∫–∞"
echo "   2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ —Å –º–Ω–µ–º–æ–Ω–∏–∫–æ–π: $GENESIS_MNEMONIC"
echo "   3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å"
echo "   4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ genesis –∞–∫–∫–∞—É–Ω—Ç–∞"
echo ""

