syntax = "proto3";

package volnix.anteil.v1;

option go_package = "github.com/volnix-protocol/volnix-protocol/proto/gen/go/volnix/anteil/v1;anteilv1";

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

// Params defines the parameters for the anteil module
message Params {
  string min_ant_amount = 1; // Minimum amount of ANT required for trading
  string max_ant_amount = 2; // Maximum amount of ANT that can be traded
  string trading_fee_rate = 3; // Trading fee rate as decimal string
  string min_order_size = 4; // Minimum order size
  string max_order_size = 5; // Maximum order size
  google.protobuf.Duration order_expiry = 6; // Order expiry duration
  bool require_identity_verification = 7; // Whether identity verification is required
  string ant_denom = 8; // Denomination for ANT tokens (e.g., "uant")
  uint32 max_open_orders = 9; // Maximum number of open orders per user
  string price_precision = 10; // Price precision for orders
}

// Order represents a trading order on the ANT market
message Order {
  string order_id = 1;
  string owner = 2; // bech32 address
  OrderType order_type = 3;
  OrderSide order_side = 4;
  string ant_amount = 5; // ANT amount as string
  string price = 6; // Price as decimal string
  OrderStatus status = 7;
  google.protobuf.Timestamp created_at = 8;
  google.protobuf.Timestamp expires_at = 9;
  string identity_hash = 10; // Link to identity verification
}

// OrderType defines the type of order
enum OrderType {
  ORDER_TYPE_UNSPECIFIED = 0;
  ORDER_TYPE_LIMIT = 1; // Limit order
  ORDER_TYPE_MARKET = 2; // Market order
}

// OrderSide defines the side of the order
enum OrderSide {
  ORDER_SIDE_UNSPECIFIED = 0;
  ORDER_SIDE_BUY = 1; // Buy order
  ORDER_SIDE_SELL = 2; // Sell order
}

// OrderStatus defines the status of the order
enum OrderStatus {
  ORDER_STATUS_UNSPECIFIED = 0;
  ORDER_STATUS_OPEN = 1; // Order is open and active
  ORDER_STATUS_PARTIALLY_FILLED = 2; // Order is partially filled
  ORDER_STATUS_FILLED = 3; // Order is completely filled
  ORDER_STATUS_CANCELLED = 4; // Order is cancelled
  ORDER_STATUS_EXPIRED = 5; // Order has expired
}

// Trade represents a completed trade
message Trade {
  string trade_id = 1;
  string buy_order_id = 2;
  string sell_order_id = 3;
  string buyer = 4; // bech32 address
  string seller = 5; // bech32 address
  string ant_amount = 6; // ANT amount traded
  string price = 7; // Execution price
  string total_value = 8; // Total value of the trade
  google.protobuf.Timestamp executed_at = 9;
  string identity_hash = 10; // Link to identity verification
}

// OrderBook represents the current state of the order book
message OrderBook {
  repeated OrderBookEntry buy_orders = 1; // Sorted by price (highest first)
  repeated OrderBookEntry sell_orders = 2; // Sorted by price (lowest first)
  string last_price = 3; // Last executed price
  string volume_24h = 4; // 24-hour trading volume
  uint64 total_orders = 5; // Total number of open orders
}

// OrderBookEntry represents an entry in the order book
message OrderBookEntry {
  string price = 1;
  string total_amount = 2; // Total amount at this price level
  uint64 order_count = 3; // Number of orders at this price level
}

// UserPosition represents a user's position in the ANT market
message UserPosition {
  string owner = 1; // bech32 address
  string ant_balance = 2; // Current ANT balance
  string locked_ant = 3; // ANT locked in open orders
  string available_ant = 4; // Available ANT for trading
  repeated string open_order_ids = 5; // IDs of open orders
  string total_trades = 6; // Total number of trades
  string total_volume = 7; // Total trading volume
  google.protobuf.Timestamp last_activity = 8;
}

// Auction represents a blind auction for block creation rights
message Auction {
  string auction_id = 1;
  uint64 block_height = 2; // Target block height
  google.protobuf.Timestamp start_time = 3;
  google.protobuf.Timestamp end_time = 4;
  AuctionStatus status = 5;
  repeated Bid bids = 6;
  string winning_bid = 7; // ID of the winning bid
  string reserve_price = 8; // Minimum acceptable price
  string ant_amount = 9; // ANT amount being auctioned
}

// Bid represents a bid in an auction
message Bid {
  string bid_id = 1;
  string bidder = 2; // bech32 address
  string amount = 3; // Bid amount
  google.protobuf.Timestamp submitted_at = 4;
  string identity_hash = 5; // Link to identity verification
}

// AuctionStatus defines the status of an auction
enum AuctionStatus {
  AUCTION_STATUS_UNSPECIFIED = 0;
  AUCTION_STATUS_OPEN = 1; // Auction is open for bidding
  AUCTION_STATUS_CLOSED = 2; // Auction is closed
  AUCTION_STATUS_SETTLED = 3; // Auction has been settled
  AUCTION_STATUS_CANCELLED = 4; // Auction was cancelled
}



